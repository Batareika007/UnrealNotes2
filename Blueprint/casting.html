<div class="warning-green">
готово
</div>

<h1>Cast</h1>

<p>
    Cast — это проверка типа объекта. Blueprint пытается понять, является ли объект 
    тем классом, к которому мы хотим обратиться. Если проверка успешна, мы получаем доступ 
    к его переменным и функциям.
</p>

<p>
    Важно: Cast <b>не загружает весь объект в память</b> и <b>не создаёт жёсткую привязку</b>.  
    Он просто проверяет: “Этот объект — нужного нам типа или нет?”
</p>

<p> Однако если Blueprint, к которому вы делаете Cast, содержит жёсткие ссылки (Hard References) на другие ассеты или Blueprint, то именно эти ссылки могут подтянуть в память дополнительные объекты. Поэтому важно понимать, к какому Blueprint вы делаете Cast и какие зависимости внутри него находятся. </p>

<hr>

<h2>Когда Cast нужен</h2>

<ul>
    <li>когда у нас есть ссылка типа <b>Actor</b> или <b>Object</b>, но мы хотим получить доступ к конкретному Blueprint;</li>
    <li>когда объект может быть разного типа, и нужно проверить, какой именно;</li>
    <li>когда взаимодействуем с объектами через Overlap, Hit, LineTrace и т.д.</li>
</ul>

<hr>

<h2>Пример: персонаж наступает на объект</h2>

<p>
    Допустим, у нас есть объект (например, платформа), и когда персонаж наступает на него, 
    мы хотим вызвать действие в персонаже.
</p>

<p>
    В объекте мы получаем ссылку на того, кто наступил (Other Actor), и пытаемся привести его к классу персонажа.
</p>

<img src="Blueprint/images/communication4.png" alt="">

<p>
    Если Cast успешен — значит, это действительно наш персонаж, и мы можем вызвать его Event.
</p>

<hr>

<h2>Создаём Event в персонаже</h2>

<p>
    В Blueprint персонажа создаём Custom Event, который будет вызываться объектом.
</p>

<img src="Blueprint/images/communication5.png" alt="">

<hr>

<h2>Вызываем Event из объекта</h2>

<p>
    После успешного Cast мы можем вызвать Custom Event персонажа напрямую.
</p>

<img src="Blueprint/images/communication6.png" alt="">

<p>
    Таким образом объект “общается” с персонажем через Cast.
</p>

<hr>

<h2>Когда Cast использовать НЕ стоит</h2>

<p>
    Cast — простой и удобный инструмент, но у него есть ограничения:
</p>

<ul>
    <li>если объектов много (например, 20 разных типов) — Cast превратится в “лес” проверок;</li>
    <li>если логика должна работать с разными классами — лучше использовать <b>Blueprint Interface</b>;</li>
    <li>если связь должна быть двусторонней — лучше Event Dispatchers;</li>
    <li>если объект может отсутствовать — Cast может часто возвращать Fail.</li>
</ul>

<p>
    Cast — хороший инструмент, но его нужно использовать там, где он действительно подходит.
</p>
