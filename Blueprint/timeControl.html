<div class="warning-green">
база готова
</div>
<h1>Time Control — Timeline и Timers</h1>

<p>
    Контроль времени в Unreal Engine строится в основном на двух инструментах:
</p>

<ul>
    <li><b>Timeline</b> — анимация значений во времени (плавные изменения, кривые, события по времени).</li>
    <li><b>Timers</b> — таймеры, которые вызывают события через определённые интервалы.</li>
</ul>

<p>
    Вместе они позволяют управлять анимациями, эффектами, логикой, задержками, повторами и цикличными действиями.
</p>

<hr>

<h2>1. Timeline — анимация значений во времени</h2>

<p>
    <b>Timeline</b> — это нода, внутри которой мы задаём, как будут меняться значения 
    на отрезке времени. Можно анимировать числа, векторы, цвета и вызывать события в определённые моменты.
</p>

<img src="/Blueprint/images/timeControl1.png" alt="">

<p>
    У Timeline есть два основных выхода:
</p>

<ul>
    <li><b>Update</b> — вызывается каждый кадр, пока Timeline проигрывается.</li>
    <li><b>Finished</b> — вызывается один раз, когда анимация дошла до конца.</li>
</ul>

<img src="/Blueprint/images/timeControl2.png" alt="">

<p>
    Внутри Timeline можно создавать несколько типов дорожек (Tracks).
</p>

<img src="/Blueprint/images/timeControl3.png" alt="">

<hr>

<h3>1.1. Float Track</h3>

<p>
    <b>Float Track</b> — стандартный тип дорожки.
</p>

<ul>
    <li>Ось X — время (сколько длится анимация).</li>
    <li>Ось Y — значение, которое мы получаем каждый кадр.</li>
</ul>

<img src="/Blueprint/images/timeControl4.png" alt="">

<p>
    Примеры использования:
</p>

<ul>
    <li>открытие двери (0 → 1);</li>
    <li>плавное изменение высоты, скорости, масштаба;</li>
    <li>анимация прозрачности, интенсивности света, громкости и т.д.</li>
</ul>

<hr>

<h3>1.2. Vector Track</h3>

<p>
    <b>Vector Track</b> — создаёт три канала (X, Y, Z), каждый можно настраивать отдельно.
</p>

<img src="/Blueprint/images/timeControl5.png" alt="">

<p>
    На выходе получаем один вектор.
</p>

<img src="/Blueprint/images/timeControl6.png" alt="">

<p>
    Его можно также разбить на три оси, если нужно работать с каждой по отдельности.
</p>

<img src="/Blueprint/images/timeControl7.png" alt="">

<p>
    Примеры:
</p>

<ul>
    <li>движение объекта по траектории;</li>
    <li>смена позиции, масштаба или направления;</li>
    <li>сложные движения без анимаций.</li>
</ul>

<hr>

<h3>1.3. Event Track</h3>

<p>
    <b>Event Track</b> — дорожка, где важны только моменты времени.
</p>

<img src="/Blueprint/images/timeControl8.png" alt="">
<img src="/Blueprint/images/timeControl9.png" alt="">

<p>
    У Event Track нет значения (Value) — нас интересуют только точки времени, в которых 
    нужно вызвать событие.
</p>

<p>
    Пример:
</p>

<ul>
    <li>каждую секунду в течение 3 секунд персонаж прыгает;</li>
    <li>запуск эффектов в строго заданные моменты анимации;</li>
    <li>спавн объектов по таймингу.</li>
</ul>

<p>
    Можно считать так: <b>Update</b> — каждый кадр, <b>Event Track</b> — в конкретные моменты, которые мы задали.
</p>

<hr>

<h3>1.4. Color Track</h3>

<p>
    <b>Color Track</b> — анимация цвета во времени.
</p>

<img src="/Blueprint/images/timeControl10.png" alt="">

<p>
    Пример:
</p>

<ul>
    <li>за 3 секунды плавно изменить цвет объекта;</li>
    <li>сделать анимированный градиент;</li>
    <li>подсветка, предупреждающие эффекты, индикаторы.</li>
</ul>

<p>
    Чтобы это работало, нужно:
</p>

<ol>
    <li>Создать материал и в нём параметр Vector (цвет).</li>
    <li>Использовать этот параметр в материале.</li>
</ol>

<img src="/Blueprint/images/timeControl11.png" alt="">

<p>
    В Blueprint:
</p>

<ol>
    <li>Создаём <b>Dynamic Material Instance</b>.</li>
    <li>Через <b>Set Vector Parameter Value</b> передаём цвет из Timeline.</li>
    <li>В <b>Source Material</b> указываем материал.</li>
    <li>В <b>Parameter Name</b> — имя параметра цвета.</li>
</ol>

<img src="/Blueprint/images/timeControl12.png" alt="">

<hr>

<h3>1.5. Custom Curve</h3>

<p>
    Чтобы получить более интересную и живую анимацию, используют <b>Custom Curve</b>.  
    Это пользовательская кривая, которую часто настраивают аниматоры.
</p>

<p>
    Её можно применить к Float/Vector Track, чтобы анимация выглядела не линейной, 
    а естественной (ускорения, замедления, прыжки и т.д.).
</p>

<hr>

<h2>2. Loop и управление Timeline</h2>

<p>
    Timeline можно легко зациклить.
</p>

<img src="/Blueprint/images/timeControl13.png" alt="">

<p>
    Если делать зацикленную анимацию, важно, чтобы последний ключ совпадал с первым — 
    иначе будет заметный «рывок» в конце цикла.
</p>

<p>
    Для более гибкого управления используем <b>Set Looping</b>.
</p>

<img src="/Blueprint/images/timeControl14.png" alt="">
<img src="/Blueprint/images/timeControl15.png" alt="">

<p>
    Можно включать или выключать зацикливание в любое время через Boolean.
</p>

<hr>

<h3>2.1. Изменение времени воспроизведения</h3>

<p>
    Можно динамически менять скорость или длительность Timeline.
</p>

<img src="/Blueprint/images/timeControl16.png" alt="">

<p>
    Важно понимать:
</p>

<ul>
    <li>слишком сильное изменение может резко обрезать анимацию;</li>
    <li>или создать задержки, если время сильно увеличено.</li>
</ul>

<hr>

<h3>2.2. Начать анимацию не с нуля</h3>

<p>
    Иногда нужно запустить Timeline не с начала, а, например, с 2-й секунды.
</p>

<img src="/Blueprint/images/timeControl17.png" alt="">

<p>
    Для этого используются:
</p>

<ul>
    <li><b>Get Playback Position</b> — узнать, на какой секунде сейчас Timeline.</li>
    <li><b>Set Playback Position</b> — задать, с какой секунды начать или продолжить.</li>
</ul>

<img src="/Blueprint/images/timeControl18.png" alt="">

<hr>

<h3>2.3. Автоматический старт без Tick</h3>

<p>
    Timeline можно запускать автоматически при старте уровня без Event Tick или сложной логики — 
    достаточно один раз вызвать его из Begin Play или другого события.
</p>

<img src="/Blueprint/images/timeControl19.png" alt="">

<hr>

<h2>3. Timer — таймеры для логики</h2>

<p>
    <b>Timer</b> — это система, которая позволяет вызывать события через определённые интервалы времени.  
    В основном используются два варианта:
</p>

<ul>
    <li><b>Set Timer by Event</b></li>
    <li><b>Set Timer by Function Name</b></li>
</ul>

<img src="/Blueprint/images/timeControl20.png" alt="">

<hr>

<h3>3.1. Timer by Event</h3>

<p>
    <b>Set Timer by Event</b> — таймер, который вызывает указанный Event с заданным интервалом.
</p>

<p>
    Пример: восстановление здоровья в зоне.
</p>

<ol>
    <li>Создаём Event восстановления здоровья.</li>
    <li>Создаём триггер на сцене, в который заходит персонаж.</li>
</ol>

<img src="/Blueprint/images/timeControl21.png" alt="">

<p>
    Далее:
</p>

<ol>
    <li>При входе в триггер — запускаем таймер (каждые 0.5 секунд).</li>
    <li>При выходе из триггера — останавливаем таймер.</li>
</ol>

<img src="/Blueprint/images/timeControl22.png" alt="">

<p>
    Также важно остановить таймер, когда здоровье достигло максимума — через Branch.
</p>

<img src="/Blueprint/images/timeControl23.png" alt="">

<p>
    Чтобы всё работало, нужно сделать Cast к персонажу в триггере.
</p>

<img src="/Blueprint/images/timeControl24.png" alt="">

<hr>

<h3>3.2. Timer by Function Name</h3>

<p>
    <b>Set Timer by Function Name</b> — более чистый и удобный вариант, когда логика вынесена в функцию.
</p>

<p>
    Шаги:
</p>

<ol>
    <li>Создаём функцию с логикой (например, восстановление здоровья).</li>
</ol>

<img src="/Blueprint/images/timeControl25.png" alt="">

<ol start="2">
    <li>В Blueprint создаём таймер и указываем имя функции.</li>
</ol>

<img src="/Blueprint/images/timeControl26.png" alt="">

<ol start="3">
    <li>В самой функции можно вызвать <b>Clear Timer by Function Name</b>, чтобы остановить таймер изнутри.</li>
</ol>

<img src="/Blueprint/images/timeControl27.png" alt="">

<p>
    Такой подход чище и лучше читается, особенно если логика сложная.
</p>

<hr>

<h2>4. Когда использовать Timeline, а когда Timer?</h2>

<ul>
    <li><b>Timeline</b> — когда нужно плавно анимировать значения во времени (позицию, цвет, масштаб, альфу).</li>
    <li><b>Timer</b> — когда нужно повторять действие через интервалы (урон/хил по времени, спавн, тик логики).</li>
</ul>

<p>
    Часто они используются вместе: Timeline отвечает за плавное движение или эффект, 
    а Timer — за периодическую логику и повторяющиеся события.
</p>
